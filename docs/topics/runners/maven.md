[//]: # (title: Maven plugin)

To generate documentation for Maven-based projects, you can use [Dokka Maven plugin](#applying-the-plugin).

> Compared to the [Gradle plugin](gradle.md), Maven plugin has only basic features and 
> **does not support multiplatform projects**.
> 
{type="note"}

## Applying the plugin

To apply the plugin, you need to add it to the plugins section of your POM:

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.jetbrains.dokka</groupId>
            <artifactId>dokka-maven-plugin</artifactId>
            <version>%dokkaVersion%</version>
            <executions>
                <execution>
                    <phase>pre-site</phase>
                    <goals>
                        <goal>dokka</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

## Generating documentation

Following goals are provided by the plugin:

| **Goal** | **Description**                                                                             |
|-----------------------|---------------------------------------------------------------------------------------------|
| `dokka:dokka`         | Generates documentation with Dokka plugins applied. [HTML](html.md) format by default.      |
| `dokka:javadoc`       | Generates documentation in [Javadoc](javadoc.md) format.                                    |
| `dokka:javadocJar`    | Generates a `javadoc.jar` file that contains documentation in [Javadoc](javadoc.md) format. |

> Unlike [Gradle plugin](gradle.md#building-javadoc-jar), Maven plugin only comes with [HTML](html.md) format built in
> and does not provide any separate goals to generate documentation in other formats. In order to do that, you will have
> to [apply other formats as Dokka plugins](#other-output-formats) and re-run `dokka:dokka` goal.
> 
{type="note"}

### Other output formats

By default, Maven plugin will build documentation in [HTML](html.md) format.

All other output formats come as [Dokka plugins](plugins_introduction.md). In order to use it, you have to apply
it as a dependency.

For example, for [GFM](markdown.md#gfm) format, you have to use apply `org.jetbrains.dokka:gfm-plugin` in the following way:

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    ...
    <configuration>
        <dokkaPlugins>
            <plugin>
                <groupId>org.jetbrains.dokka</groupId>
                <artifactId>gfm-plugin</artifactId>
                <version>%dokkaVersion%</version>
            </plugin>
        </dokkaPlugins>
    </configuration>
</plugin>
```

After that, running `dokka:dokka` goal should produce documentation in GFM format.

You can learn more about Dokka plugins in [a separate topic](plugins_introduction.md).

## Building javadoc.jar

Unlike [Gradle plugin](gradle.md#building-javadoc-jar), Maven plugin comes with ready-to-use `dokka:javadocJar` goal.
By default, it will generate documentation in [Javadoc](javadoc.md) format under `target` folder.

If you are not satisfied with the built-in goal or want to customize the output (for instance, you want to generate
documentation in [HTML](html.md) format instead of Javadoc), similar behaviour can be achieved by adding the
Maven jar plugin with the following configuration:

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>3.3.0</version>
    <executions>
        <execution>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
        <execution>
            <id>dokka-jar</id>
            <phase>package</phase>
            <goals>
                <goal>jar</goal>
            </goals>
            <configuration>
                <classifier>dokka</classifier>
                <classesDirectory>${project.build.directory}/dokka</classesDirectory>
                <skipIfEmpty>true</skipIfEmpty>
            </configuration>
        </execution>
    </executions>
</plugin>
```

The documentation and the archive for it can then be generated by running `dokka:dokka` and `jar:jar@dokka-jar` goals:

```Bash
mvn dokka:dokka jar:jar@dokka-jar
```

## Configuration

Maven's plugin configuration block can be used to configure Dokka.

Below you will find basic configuration that only changes output location of documentation. See 
[all configuration elements](#all-configuration-elements) section to find out what else is possible.

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    ...
    <configuration>
        <outputDir>${project.basedir}/target/documentation/dokka</outputDir>
    </configuration>
</plugin>
```

### All configuration elements

TODO add descriptions for each setting as a separate entry in a table

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    ...
    <configuration>
        <skip>false</skip>
        <moduleName>${project.artifactId}</moduleName>
        <outputDir>${project.basedir}/target/documentation</outputDir>
        <failOnWarning>false</failOnWarning>
        <suppressObviousFunctions>true</suppressObviousFunctions>
        <suppressInheritedMembers>false</suppressInheritedMembers>
        <offlineMode>false</offlineMode>

        <sourceSetName>JVM</sourceSetName>
        <sourceDirectories>
            <dir>${project.basedir}/src/main/kotlin</dir>
        </sourceDirectories>
        <displayName>JVM</displayName>
        <documentedVisibilities>
            <visibility>PUBLIC</visibility>
            <visibility>PRIVATE</visibility>
            <visibility>PROTECTED</visibility>
            <visibility>INTERNAL</visibility>
            <visibility>PACKAGE</visibility>
        </documentedVisibilities>
        <reportUndocumented>false</reportUndocumented>
        <skipDeprecated>false</skipDeprecated>
        <skipEmptyPackages>true</skipEmptyPackages>
        <suppressedFiles>
            <file>/path/to/dir</file>
            <file>/path/to/file</file>
        </suppressedFiles>
        <jdkVersion>8</jdkVersion>
        <languageVersion>1.7</languageVersion>
        <apiVersion>1.7</apiVersion>
        <noStdlibLink>false</noStdlibLink>
        <noJdkLink>false</noJdkLink>
        <includes>
            <include>packages.md</include>
            <include>extra.md</include>
        </includes>
        <platform>JVM</platform>
        <sourceRoots>
            <root>
                <path>src/main/kotlin</path>
                <platforms>JVM</platforms>
            </root>
        </sourceRoots>
        <classpath>${project.compileClasspathElements}</classpath>
        <samples>
            <dir>${project.basedir}/samples</dir>
        </samples>
        <sourceLinks>
            <link>
                <path>${project.basedir}/src/main/kotlin</path>
                <url>https://github.com/kotlin/dokka/tree/master/src/main/kotlin</url>
                <lineSuffix>#L</lineSuffix>
            </link>
        </sourceLinks>
        <externalDocumentationLinks>
            <link>
                <url>https://kotlinlang.org/api/latest/jvm/stdlib/</url>
                <packageListUrl>file:/${project.basedir}/stdlib.package.list</packageListUrl>
            </link>
        </externalDocumentationLinks>
        <perPackageOptions>
            <packageOptions>
                <matchingRegex>.*api.*</matchingRegex>
                <suppress>false</suppress>
                <reportUndocumented>false</reportUndocumented>
                <skipDeprecated>false</skipDeprecated>
                <documentedVisibilities>
                    <visibility>PUBLIC</visibility>
                    <visibility>PRIVATE</visibility>
                    <visibility>PROTECTED</visibility>
                    <visibility>INTERNAL</visibility>
                    <visibility>PACKAGE</visibility>
                </documentedVisibilities>
            </packageOptions>
        </perPackageOptions>
    </configuration>
</plugin>
```
